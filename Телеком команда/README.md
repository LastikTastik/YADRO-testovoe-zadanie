### Раздел 1
В первом разделе нужно было составить скрипт, который выполняет 5 разных http запросов согласно требованиям. Для того чтобы выполнить 5 разных http запросов я создал 5 списков spisok_status_100...spisok_status_500. Эти списки я объединяю в один all_status_lists и создаю цикл от одного до 5 включительно для каждой категории. В цикле мы вызываем функцию make_and_randomize_http_request(spisok) в качестве аргумента мы передаём список. В этой функции в списке рандомно выбирается id элемента (от нуля до длины списка), идёт запрос к https://httpstat.us/{код}. Если код 1xx-3xx — вывожу статус и тело ответа, если 4xx-5xx — кидаю исключение, если нет подключения(ошибка соединения), тогда я вывожу на экран сообщение об ошибке.

### Раздел 2
Во втором разделе нужно было разработать Docker-образ в соответствии с требованиями. Для создания образа я создал Dockerfile, в котором сделал следующее: 

1) Использовал базовый образ ubuntu:22.04
2) Установил python3 и pip командой apt-get install
3) Скопировал файлы скрипта и requirements.txt (которые находятся в одной папке с Dockerfile) в рабочую директорию /script
4) Установил зависимости через pip install -r requirements.txt
5) Настроил ENTRYPOINT для автоматического запуска скрипта

После этого я с помощью команды cd перешёл в директорию с Dockerfile и запустил в этой директории следующую команду: "docker build -t search_http .". После выполнения команды появился образ. Используя этот образ я запустил команду "docker run search_http" который создал контейнер с автоматическим запуска скрипта из 1 раздела. Далее использовал команду "docker logs ID_КОНТЕЙНЕРА", чтобы посмотреть логи контейнера. На этом закончил выполнять раздел 2

### Раздел 3
Раздел 3: Автоматизация процесса с помощью Ansible

В третьем разделе нужно было автоматизировать процесс установки Docker и проверки работы скрипта из первого раздела с помощью Ansible. Для этого я использовал virtual box и на него поставил ubuntu и ubuntu-server:

- ubuntu (с пользователем admin) - ВМ, на который я установил ansible
- ubuntu-server (с пользователем ubuntu1) - чистая виртуальная машина, которую я использовал для удалённого подключения (чтобы проверить плейбук в разных ситуациах)

Далее на ubuntu я создал для начала папку ansible (для удобства) и в этой папке создал два файла: hosts и playbook "docker-install.yaml". В папке hosts я написал два хоста для подключения:

- Локальный - группа local (admin ansible_host=127.0.0.1 ansible_connection=local ansible_user=meadmin)
- Удалённый - группа notlocal (ubuntu1 ansible_host=192.168.0.104 ansible_user=ubuntu1)

После этого я проверил подключение с помощью ansible all -i hosts -m ping.
Для каждой поставленной задачи в playbook я делал разные действия в модуле "tasks". Мой плейбук делал следующее:

1) Устанавливает нужные зависимости для docker, используя модуль apt
2) Добавляет GPG-ключ и репозиторий Docker с помощью модулей apt_key и apt_repository
3) Устанавливает сам Docker (docker-ce, docker-ce-cli) опять же используя модуль apt
4) Добавляет текущего пользователя в группу docker, чтобы не нужно было писать каждый раз sudo ( для данной реализации я использовал модуль user )
5) Проверяет что Docker установился через docker --version благодаря модулю command
6) Копирует файлы для сборки Docker-образа
    - Используя модуль copy, playbook переносит локальные файлы (включая Dockerfile, скрипт, requirements.txt) в директорию /tmp/docker_build/ на целевом хосте
7) Собирает Docker-образ
    - Playbook создаёт Docker-образ из Dockerfile с помощью модуля community.docker.docker_image.
8) Удаляет старый контейнер для избежания конфликтов командой docker rm.
9) Запускает контейнер 
    - Используя модуль community.docker.docker_container, playbook запускает контейнер с именем container_search из образа search_http
10) Проверяет успешности выполнения скрипта через container_run.container.State.ExitCode. Если код не равен 0, выводится сообщение об ошибке
11) Получает и выводит логи
    - Playbook ожидает 10 секунд (модуль pause), чтобы скрипт успел выполниться, затем извлекает логи контейнера командой docker logs. Логи выводятся на экран с очисткой лишних символов
12) Автоматически проверяет работу скрипта
    - Весь процесс проверки (код завершения и логи) выполняется автоматически, что соответствует заданию.

Для запуска плейбука я использовал команду ansible-playbook -i hosts docker-install.yml. После запуска команды на целевой хост установился Docker и всё остальное, что нам требовалось в задании.

Я долго мучился с этим плейбуком так как постоянно ошибался с пробелами :D. Но в конце концов у меня получилось реализовать то, что требовало задание.  
**Спасибо за интересное тестовое задание!** 


